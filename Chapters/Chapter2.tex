%!TEX root = ../tcc.tex

\chapter{Napster, Gnutella, eDonkey e BitTorrent}

\begin{comment}
Vou contar a história do BitTorrent, desde o aumento do uso de
transferências de dados via internet, passando pela criação de protocolos e softwares
usados para baixar arquivos de forma ilegal, até a sua criação e o boom de usuários que
o utilizam para essa motivação. Em paralelo, discutirei os motivos legais pelos quais os
softwares anteriores foram descontinuados, que influenciaram diretamente na sua criação.

Separarei em 3 períodos: o antes, a criação e as consequências disso no mundo.
\end{comment}

Para entendermos como e por que o BitTorrent se tornou o que é hoje, devemos voltar um
pouco no tempo e rever a história que precedeu à sua criação, que é o fim da década dos
anos 1990.

% http://tex.stackexchange.com/a/99664
% \newglossaryentry{www}{
%     name={World Wide Web},
%     description={World Wide Web (WWW) é nome que se dá à rede mundial de
%             computadores interligados, que originou a Internet},
%     first={World Wide Web (WWW)},
%     long={World Wide Web}
% }

\section{Período pré-torrent}

\newglossaryentry{isp}{
    name={ISP},
    description={do inglês \emph{Internet Service Provider}; fornecedores de
    acesso a Internet, que são empresas que vendem serviço e equipamento que permitem
    o acesso de um computador pessoal acessar a Internet},
    first={fornecedor de acesso a Internet (\glsentryname{isp})},
    long={fornecedor de acesso a Internet},
    plural={\glsentryname{isp}s},
    firstplural={fornecedores de acesso a Internet (\glsentryname{isp})}
}

\newglossaryentry{mp3}{
    name={MP3},
    description={do inglês \emph{MPEG-1/2 Audio Layer 3}; formato patenteado de
    compressão de dados de áudio digital que usa um método de compressão de dados com
    perdas},
    first={\glsentrylong{mp3} (\glsentryname{mp3})},
    long={formato de áudio \glsentryname{mp3}},
    plural={\glsentryname{mp3}s}
}

\newglossaryentry{peer}{
    name={peer},
    description={do inglês \emph{peer-to-peer}; como são chamados cada nó da rede desse
    tipo},
    first={\glsentrylong{peer} (um nó da rede)},
    long={\glsentryname{peer}},
    plural={\glsentryname{peer}s}
}

\newglossaryentry{p2p}{
    name={P2P},
    description={do inglês \emph{peer-to-peer}; redes de arquitetura descentralizada e
    distribuída, onde cada nó (\emph{peer}) faz fornece e consome recursos},
    first={\glsentrylong{p2p} (\glsentryname{p2p})},
    long={rede \glsentryname{p2p}},
    plural={redes \glsentryname{p2p}}
}

\newglossaryentry{audiogalaxy}{
    name={Audiogalaxy},
    description={rede P2P de compartilhamento de músicas MP3 criado em 1998},
    first={\glsentryname{audiogalaxy}.com},
    long={\glsentryname{audiogalaxy}}
}

\newglossaryentry{riaa}{
    name={RIAA},
    description={do inglês \emph{Recording Industry Association of America}; Associação
    da Indústria de Gravação da América, organização que representa as gravadoras
    musicais e distribuidores, e tem sido autora de ações judiciais devido a quebra de
    direitos autorais causada por compartilhamento indevido de música},
    first={RIAA (do inglês \emph{Recording Industry Association of America})},
    long={\glsentryname{riaa}}
}

\newglossaryentry{gnutella}{
    name={Gnutella},
    description={software de compartilhamento P2P desenvolvido por 3 programadores da
    empresa Nullsoft, recém adquirida da AOL Inc., lançado em 2000 sob a licença GPL.
    No dia seguinte, a AOL ordenou indisponibilizar o software alegando problemas
    legais e proibindo a continuação do desenvolvimento. Alguns dias depois, o
    protocolo já tinha sido alvo de engenharia reversa e já havia softwares que o
    implementavam.},
    first={\glsentryname{gnutella}}
}

\newglossaryentry{anycast}{
    name={anycast},
    description={método de endereçamento e roteamento de rede onde os datagramas de um
    único remetente são roteados para um membro de um grupo de receptores potenciais que
    estão definidos pelo mesmo intervalo no endereço de destino. Geralmente é usado
    para serviços que demandem alta disponibilidade},
    first={\glsentryname{anycast}}
}

\newglossaryentry{edonkey}{
    name={eDonkey},
    description={},
    first={\glsentryname{edonkey}}
}

\newglossaryentry{swarming}{
    name={swarming},
    description={},
    first={\glsentryname{swarming}}
}

\newglossaryentry{hash}{
    name={hash},
    description={},
    first={\glsentryname{hash}},
    plural={hashes}
}

\newglossaryentry{dht}{
    name={DHT},
    description={},
    first={\glsentryname{dht}}
}

\newglossaryentry{kademlia}{
    name={Kademlia},
    description={},
    first={\glsentryname{kademlia}}
}

Entre o final dos anos 80 e o início dos 90 \cite{site:wiki-fs,site:wiki-fs-timeline}, a
Internet deixou de ser uma rede de computadores usada somente por entidades
governamentais, laboratórios de pesquisa e universidades, passando a ter seu acesso
comercializado para o público em geral pelos \glspl{isp} \cite{site:wiki-isp}. Com o
advento do \gls{mp3} \cite{site:wiki-mp3} no final de 1991 e do seu primeiro reprodutor
de áudio \gls*{mp3} Winamp, o tráfego da Internet aumentou devido ao aumento da troca
direta desse tipo de arquivo.

Entre 1998 e 1999, dois sites de compartilhamento gratuito de músicas foram criados: o
MP3.com \cite{site:wiki-mp3.com}, que era um site de divulgação de bandas independentes,
e o \gls{audiogalaxy} \cite{site:wiki-audiogalaxy.com,revista:pnp}. Mais popular que o
primeiro, o \gls*{audiogalaxy} era um site de busca de músicas, sendo que o download e
upload eram feitos a partir de um software cliente. A lista de músicas procuradas ia da
página para o computador onde usuário tinha instalado o cliente, que então conectava
com o do outro usuário, que era indicado pelo servidor. A lista possuía todos os
arquivos que um dia passaram pela sua rede. Se algum arquivo fosse requisitado mas o
usuário que o possuísse não estivesse conectado, o servidor central do
\gls*{audiogalaxy} fazia a ponte, pegando o arquivo para si e enviando-o para o cliente
do requisitante em seu próximo login.

\subsection{Napster}

Em maio de 1999 surgiu o Napster \cite{site:wiki-napster}, um programa de
compartilhamento de \gls*{mp3} que inovou por desfigurar o usual modelo
cliente-servidor, onde um servidor central localizava os arquivos nos usuários e fazia
a conexão entre os usuários, onde ocorria a transferências. O Napster foi contemporâneo
do \gls*{audiogalaxy} e ambos fizeram muito sucesso por cerca de 2 anos, até que
começaram as ações judiciais.

Não demorou muito tempo para a indústria da música entrar em ação contra a troca de
arquivos protegidos por direitos autorais sem autorização pela Internet. Seu primeiro
alvo foi o Napster, em dezembro de 1999, quando a \gls{riaa} entrou com processo
representando várias gravadoras alegando quebra de direitos autorais
\cite{site:napster-riaa}. Em abril de 2000, foi a vez da banda Metallica processar,
como resposta à sua descoberto que uma música ainda não lançada oficialmente já
circulava na rede \cite{site:napster-metallica,site:napster-metallica-orig}. Um mês
depois, outra ação, agora encabeçada pelo rapper Dr. Dre, que tinha feito pedido formal
para a retirada de seu material de circular, também abriu processo
\cite{site:napster-drdre-orig}. Isso fez com que o Napster tivesse atenção da mídia,
ganhando popularidade e atingindo o 20 milhões de usuários em meados de 2000
\cite{site:napster-use-2000}.

Em 2001, esses imbróglios judiciais resultaram numa liminar federal que ordenava a
retirada de conteúdo protegido das entidades representadas pela \gls*{riaa}. O Napster
tentou, mas a juíza do caso não ficou satisfeita ordenando então, em julho, o
desligamento da rede enquanto não conseguisse controlar o conteúdo que trafegava ali
\cite{site:wiki-napster}. Em setembro, o Napster fez um acordo, onde pagou 26 milhões de
dólares por danos já causados, uso indevido de música e também 10 milhões de dólares
pelos danos futuros envolvendo royalties. Para pagar esse valor, o Napster tentou cobrar
o serviço de seus usuários, que acabaram migrando de rede \gls*{p2p}, inclusive para o
\gls*{audiogalaxy}. Não conseguindo, em 2002, o Napster decreta falência e é forçado a
liquidar seus ativos. De lá para cá, foi negociado algumas vezes e atualmente pertence
ao site Rhapsody \cite{site:napster-rhapsody}.

O sucesso do Napster, mesmo que por curto período tempo, mostrou o potencial das redes
\gls*{p2p} poderiam ter, e com isso novos softwares e protocolos de redes foram sendo
lançados, sempre tentando se diferenciar dos outros softwares a fim de não serem novos
alvos de ações judiciais. A solução para isso foi tentar descentralizar os mecanismos de
indexação e de busca, que foram os pontos fracos do Napster.

\todorefs{falta apontar as refs}

\subsection{Gnutella}

O tal sucessor foi o \gls{gnutella}, em março de 2000, foi uma resposta de domínio
público feita com ``gambiarras'' para os problemas que o Napster encontrou com relação
ás acusações deviolação de direitos autorais. Enquanto o Napster possuía um servidor
central como estrutura que, no julgamento, foi usado como prova de que o sistema
encorajava a violação de direitos autorais, o \gls*{gnutella} foi modelado como um
sistema \gls*{p2p} puro, onde todos os \glspl*{peer} são completamente iguais, sendo
responsáveis pelos seus próprios atos.

O \gls*{gnutella} disponibiliza arquivos da mesma forma que o Napster, mas sem a
limitação de ser de formato de música, ou seja, qualquer arquivo pode ser compartilhado.
A diferença mais significativa entre os dois protocolos é o algoritmo de busca: a
abordagem do \gls*{gnutella} é baseada numa forma de \gls{anycast}. Isso envolve duas
partes: a primeira é como cada usuário é conectado a outros nós e mantém a lista dessas
conexões atualizada. A segunda parte é como ele trata as buscas e trabalha inundando de
pedidos para todos os nós que estão a uma certa distância do usuário (nó-cliente). Por
exemplo, se a distância limite for de 4, então todos os nós que estiverem a 4 passos a
partir do cliente serão verificados, começando a partir dos mais próximos.
Eventualmente, algum nó possuirá o arquivo requisitado e responderá, e assim será feita
a transferência desse arquivo. Muitos softwares que implementam o protocolo vão além
dessa funcionalidade básica de download simples tentando transferir de forma paralela
partes diferentes do arquivo desejado de nós diferentes, tentando amenizar eventuais
problemas de velocidade de rede.

Experiências sugerem assim que o sistema escala para um tamanho maior, o mecanismo de
\gls*{anycast} se torna extremamente caro e em algumas vezes até proibitivo. O problema
ocorre nas buscas por arquivos menos populares, onde será necessário um maior número de
nós perguntados.

O \gls*{gnutella} ainda teve uma segunda versão, no final de 2002, onde utilizou o mesmo
protocolo que o original, porém organizando a rede de \glspl*{peer} em \emph{leafs}
(folhas, em inglês) e \emph{hubs}. Um \emph{hub} poderia ter centenas de conexões de
folhas outras 7, em média, a outros \emph{hubs}, enquanto uma folha se conectaria
apenas a 2 \emph{hubs}. Essa nova topologia, somada com uma nova tabela de índice de
arquivos das folhas mantida pelos \emph{hubs} onde estavam conectados, melhorou o
desempenho das buscas, que era ruim na versão antiga.

\subsection{eDonkey}

%\todo[inline]{glossários para: edonkey, swarming, hash, dht, kademlia}

Lançado em 6 de setembro de 2000, o protocolo \gls{edonkey} foi inaugurado juntamente
com o software que o utilizava, o eDonkey2000, mas inúmeros softwares cliente para
diferentes plataforas surgiram nos dias seguintes ao lançamento. Porém, não foi o
cliente, mas sim o protocolo, que inovou em muitos aspectos de seus precursores, tendo
papel fundamental na história das redes \gls*{p2p}.

O \gls*{edonkey} implementou o primeiro método de download por \gls{swarming}, que é
chamado o método onde \glspl*{peer} fazem downloads de diferentes partes de um arquivo e
de \glspl*{peer} diferentes, utilizando de forma efetiva a largura de banda de rede
para todos os \glspl*{peer} ao invés de ficar limitado somente à banda de um único
\gls*{peer}.

Outra melhoria foi a busca: no seu lançamento, os servidores eram separados entre si,
porém nas versões seguintes permitiu que eles formassem uma rede de buscas. Isso
permitiu que os servidores repassassem buscas de seus clientes conectados localmente a
outros servidores, facilitando a localização de \glspl*{peer} conectados em qualquer
servidor da rede de buscas, aumentando a capacidade de download do enxame.

Uma terceira diferença com o Napster foi o uso de \glspl{hash} de arquivos nos
resultados de busca ao invés dos simples nomes dos arquivos. As buscas geradas
pelos usuários eram baseadas em palavras-chave e comparadas com a lista de nomes de
arquivos armazenada no servidor, mas o servidor retornava uma lista de pares de nomes
de arquivos com seus repectivos valores \gls*{hash}. Enfim, quando o usuário
selecionasse o arquivo desejado, o cliente iniciaria o download do arquivo usando o seu
valor \gls*{hash}. Desse modo, um arquivo poderia ter muitos nomes entre os diferentes
\gls*{peer} e servidores, mas seria considerado idêntico para download se possuísse o
mesmo \gls*{hash}.

A arquitetura da rede em dois níveis usando cliente e servidor alcançou um meio termo
entre as redes centralizadas, como o Napster, e as descentralizadas, como o
\gls*{gnutella}, já que o servidor central no primeiro era um alvo estável para ações
legais, enquanto o segundo rapidamente mostrou-se inviável devido ao tráfego massivo de
buscas entre \glspl*{peer}.

Por fim, a inovação mais importante foi o uso de \gls{dht}, em específico o
\gls{kademlia}, como algoritmo de indexação e busca nos servidores centrais dos
arquivos através da rede \gls*{edonkey}. Além de ser uma das causas da melhora no
desempenho nas buscas, \glspl*{dht} possuem ainda outras características como
tolerância a falhas e escalabilidade. O \gls*{kademlia} em específico ainda oferece
outras vantagens como armazenamento de dados eficiente; anonimato; segurança de rede,
conteúdo e usuário; e autenticação.

\section{Nascimento do BitTorrent}

Aqui contarei a história do surgimento do protocolo.

\section{Mundo pós-torrent}

Aqui discorrerei sobre as consequências do uso do BitTorrent, desde as influências acadêmico-tecnológicas da sua difusão, bem como explicarei as questões jurídicas envolvidas no seu uso.

\clearpage