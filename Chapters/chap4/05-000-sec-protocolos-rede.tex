%!TEX root = ../../tcc.tex

\section{Protocolos TCP e UDP}

A Internet é o meio mais importante de comunicação que existe atualmente. Usamos de
forma tão corriqueira que nem nos damos conta de quantas camadas e protocolos existem em
uso em um único instante. Para chegar até o que é hoje, passou por uma grande evolução,
que começou a partir da precursora da Internet, a ARPAnet, que em outubro de 1969
\cite{book:kurose} conectou quatro universidades. Atualmente, seus protocolos são mantidos
pela IETF (Internet Engineering Task Force).

Tecnicamente falando, a Internet é organizada em uma pilha de camadas de protocolo, que
oferecem e consomem serviços às camadas adjacentes, permitindo que dados sejam roteados
entre um computador emissor e outro receptor. Esses protocolos podem estar implementados
tanto por \emph{software}, por \emph{hardware}, ou por uma combinação de ambos. A
vantagem da modelagem da pilha é ela que provê um meio organizado de se discutir as
partes do sistema, e até atualizá-las separadamente. Em contrapartida, uma camada pode
necessitar de um valor presente em outra, ou ainda possuir alguma funcionalidade já
implementada em outra.

As cinco camadas que representam a pilha de camadas de protocolo da Internet podem ser
explicadas fazendo-se uma analogia com um serviço postal \cite{site:internet-layer}:

\begin{description}
    \item[aplicação:] é onde existem as aplicações de rede e seus protocolos; ocorrem
        as traduções de endereços de Internet para endereços de rede (DNS); e
        transmissões de documentos de Internet (HTTP), de mensagens de e-mail (SMTP) e
        de arquivos (FTP). Os pacotes de dados dessa camada são chamados de
        \textbf{mensagens}.

        Nessa camada, seria onde uma pessoa escreve uma carta a uma amiga e a deposita
        na caixa de correio. A pessoa amiga recebe a carta na sua caixa de correio e a
        lê. Ambas as pessoas não sabem dos processos e rotas que a carta tomou. Bastou
        uma enviar a carta e a outra recebê-la;

    \item[transporte:] é onde atuam os protocolos \gls{tcp} e \gls{udp}, que recebem as
        mensagens através de \glspl{socket} e as transformam em \textbf{segmentos}.
        Além disso, também criam conexões entre cliente e servidor (multiplexação e
        demultiplexação dos dados) e as monitora, prevenindo erros.

        No caso do serviço postal, o remetente será avisado se enviar a carta para um
        endereço incorreto (por exemplo, se tiver errado o Estado), ou ainda se uma
        carta registrada não puder ser entregue. Nesses casos, a carta é devolvida,
        ficando a cargo da pessoa decidir o que fazer após esse problema;

    \item[rede:] é responsável por transportar pacotes, conhecidos como
        \textbf{datagramas}, para outro computador. Ele recebe da camada de transporte
        um segmento e um endereço de destino. Assim, funciona como um serviço de
        entrega, que sabe quais rotas o datagrama deve tomar para chegar ao destino.
        Também é onde atua o protocolo IP nas versões IPv4 e IPv6, que todo componente
        de Internet deve possuir, e que define alguns dados no datagrama, da mesma
        forma que equipamentos roteadores fazem.

        O serviço de entrega de correio usaria aviões para transportar suas cartas
        entre as cidades, porém seu piloto não saberia quem as enviou, para quem
        levando ou quais seus conteúdos;

    \item[enlace:] responsável pela transmissão dos dados que recebe da camada de rede.
        A cada nó da rota, a camada de rede repassa o datagrama para a camada de
        enlace, que então o transforma em \textbf{quadros} e o entrega para o próximo
        nó da rede. Esse nó recebe os quadros na sua camada de enlace e os repassa a
        sua camada de rede. Dos protocolos que atuam nesta camada, se incluem o
        Ethernet, os vários de conexões wifi, os de ponto a ponto (PPP), etc.

        Para o serviço postal, seu equivalente seria a frota de caminhões e
        entregadores, que distribui os pacotes dentro de uma cidade; e

    \item[física:] responsável pela transmissão de cada bit dos quadros, de um nó para
        outro. Os protocolos dessa camada dependem do tipo de meio pelo qual os nós
        estão ligados. Por exemplo, o protocolo Ethernet possui uma especificação para
        cabeamentos coaxiais, outra para cabos de par trançado, outra para fibra óptica,
        etc.

        Na analogia das cartas, são as canetas e papéis usados em sua escrita, ou a luz
        acesa para sua leitura.
\end{description}

Uma característica bastante forte do BitTorrent é o uso perceptível dos protocolos
\gls*{tcp} e \gls*{udp}, onde ele implementa sempre a mesma funcionalidade para cada um
desses protocolos. Ambos têm suas características , que podem ser explorados
dependendo da aplicação, para uma melhor utilização dos recursos.

\input{Chapters/chap4/05-100-subsec-udp}

\input{Chapters/chap4/05-200-subsec-tcp}

\input{Chapters/chap4/05-300-subsec-discussao}
